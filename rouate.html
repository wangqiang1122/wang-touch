<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <title>旋转</title>
    <style>
        #box {
            width: 200px;
            height: 200px;
            background-color: yellow;
            /*position: absolute;*/
            top:100px;
            left: 50px;
            margin: 0 auto;
        }
        #input {

            /*margin-top: 100px;*/
        }
    </style>
</head>
<body>
 <div id = 'box'>
    你可以转了
 </div>

<!--<input id="input">1111</input>-->
 <input type="text" value="1111" id="input">
</body>
<script>
    // 弧度/派 = 角度/180
    window.onload = function () {
        var box = document.getElementById('box');
        let input = document.getElementById('input');
        let datanag = 0; // 保存当前角度
        box.addEventListener('touchstart',function (ev) {
            ev.preventDefault()
            var e = ev.targetTouches;
            console.log(e);
            // input.innerHTML = JSON.stringify(e);
            var startAng = datanag;
            if (e.length === 2) {
                var x = e[0].clientX - e[1].clientX;
                var y = e[0].clientY - e[1].clientY;
                // input.value = `x=${x} y=${y}`
                // var ang = Math.atan2(y,x)*180/Math.PI;
                var ang = Math.atan(y/x)*180/Math.PI;
            }
            box.addEventListener('touchmove',function (ev) {
                var e = ev.targetTouches;
                ev.preventDefault()
                if (e.length === 2) {
                    var x = e[0].clientX - e[1].clientX;
                    var y = e[0].clientY - e[1].clientY;
                    // var ang2 = Math.atan2(y,x);
                    var ang2 = Math.atan(y/x);
                    var jiaodu = (((ang2)*180/Math.PI)-ang)+startAng;
                    datanag = jiaodu;
                    input.value = jiaodu;
                    this.style.transform = 'rotate('+jiaodu+'deg)';
                }
            })
        })
    }
</script>
</html>